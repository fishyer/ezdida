#!/bin/bash
source ./.husky/shell/config-read.sh

# shellcheck disable=SC2034
start_time=$(date +%s)
log "âœ…Running pre-push hook..."

# å¦‚æœbuild_modeä¸ºpreviewï¼Œåˆ™ä¸æ‰§è¡Œpushæ“ä½œï¼Œå°±é€€å‡ºæ‰§è¡Œ 1 2 3 4 5
# log "Configuring: build_type=$build_type"
# if [ "$build_type" = "preview" ]; then
#     log "ğŸš«Skip $tag for preview version."
#     # exit 1 2>/dev/null
# else
#     sh ./.husky/shell/build.sh
#     ent_time=$(date +%s)
#     log "ğŸ‰Success $tag. Time elapsed: $((ent_time - start_time))s"
#     # exit 1 2>/dev/null
# fi
# sh ./.husky/shell/docker-commit.sh
# sh ./.husky/shell/docker-push.sh

# done
ent_time=$(date +%s)
echo "$0 æ‰§è¡Œå®Œæˆ,è€—æ—¶ï¼š$((ent_time-start_time))s"

# git push -f origin fishyer --no-verify 
# pre-push: æ‰§è¡Œbuild.sh,ç”Ÿæˆæ„å»ºäº§ç‰©. å°†ç¬¬2æ®µçš„MinorVersion+1,å¹¶å½’é›¶ç¬¬3æ®µçš„PatchVersion 1 2 3
# ps aux | grep git | grep -v grep | awk '{print $2}' | xargs kill